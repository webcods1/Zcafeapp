import"./modulepreload-polyfill-B5Qt9EMX.js";import{initializeApp as d}from"https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";import{getDatabase as m,ref as c,get as u,push as f}from"https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";const g={apiKey:"AIzaSyBD_s0bu-ei-bsdPDIFaDF6gbuck-85hbM",databaseURL:"https://zcafe-65f97-default-rtdb.firebaseio.com"},b=d(g),p=m(b);let e=!1;window.toggleMode=()=>{e=!e,document.getElementById("title").innerText=e?"Admin Register":"Admin Login",document.getElementById("branch").style.display=e?"block":"none",document.querySelector(".toggle").innerText=e?"Already registered? Login":"New Admin? Register here"};window.submit=async()=>{const a=document.getElementById("username").value.trim(),s=document.getElementById("password").value.trim(),o=document.getElementById("branch").value;if(!a||!s){alert("Enter username & password");return}const l=c(p,"admins"),n=await u(l);if(e){if(!o)return alert("Select branch");let t=!1;if(n.exists()&&n.forEach(r=>{r.val().username===a&&(t=!0)}),t)return alert("Username already exists");await f(l,{username:a,password:s,branch:o}),alert("Admin registered successfully!"),toggleMode()}else{let t=!1;n.exists()&&n.forEach(r=>{const i=r.val();i.username===a&&i.password===s&&(localStorage.setItem("adminBranch",i.branch),t=!0)}),t?window.location.href="admin.html":alert("Invalid credentials")}};
