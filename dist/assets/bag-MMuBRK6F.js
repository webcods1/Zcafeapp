import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css                *//* empty css               */import{initializeApp as d}from"https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";import{getDatabase as g,push as p,ref as u}from"https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";const f={apiKey:"AIzaSyBD_s0bu-ei-bsdPDIFaDF6gbuck-85hbM",authDomain:"zcafe-65f97.firebaseapp.com",databaseURL:"https://zcafe-65f97-default-rtdb.firebaseio.com",projectId:"zcafe-65f97",storageBucket:"zcafe-65f97.firebasestorage.app",messagingSenderId:"480288327990",appId:"1:480288327990:web:9c79040289023919034b97"},b=d(f),I=g(b);let t=JSON.parse(localStorage.getItem("cartItems"))||[];const n=document.getElementById("bag-items"),c=document.getElementById("cart-badge");function i(){const e=t.reduce((a,o)=>a+o.quantity,0);c.textContent=e,c.style.display=e>0?"flex":"none"}function r(){if(n.innerHTML="",!t.length){n.innerHTML="<p>Your Cart is empty.</p>",i();return}t.forEach((e,a)=>{n.innerHTML+=`
        <div class="bag-item">
          <h3>${e.name}</h3>
          <input type="number" min="1" value="${e.quantity}"
            onchange="window.updateQty(${a}, this.value)">
          <button onclick="window.removeItem(${a})">Remove</button>
        </div>
      `}),i()}window.updateQty=(e,a)=>{t[e].quantity=parseInt(a),localStorage.setItem("cartItems",JSON.stringify(t)),r()};window.removeItem=e=>{t.splice(e,1),localStorage.setItem("cartItems",JSON.stringify(t)),r()};r();document.getElementById("book-btn").addEventListener("click",()=>{if(!t.length){alert("Your bag is empty!");return}const e=localStorage.getItem("phoneNumber"),a=localStorage.getItem("deliveryAddress"),o=localStorage.getItem("deliverFrom"),s=localStorage.getItem("companyName");if(!e||!a||!o){alert("Please complete Profile (Phone, Address, Branch)"),window.location.href="profile.html";return}const m={customerPhone:e,customerCompany:s||"Regular Customer",customerLocation:o,customerAddress:a,items:t,status:"Pending",timestamp:new Date().toLocaleString()};p(u(I,"orders"),m).then(()=>{alert("âœ… Order placed successfully!"),t=[],localStorage.removeItem("cartItems"),r()}).catch(l=>{console.error(l),alert("Order failed")})});document.getElementById("clear-btn").addEventListener("click",()=>{t.length&&confirm("Clear bag?")&&(t=[],localStorage.removeItem("cartItems"),r())});
